<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set Price</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
</head>
<body>
    <form action='/price' method='POST'>
        <div class="container pricer">
            <div class="row centering">
                <div class="col-3"><strong>Spur :</strong></div>
                <div class="col-7 col-lg-6 slidecontainer">
                    <input type="range" min="1" max="50" value="1" class="slider" id="spur" placeholder="<%= prices[0] %>">
                </div>
                <div class="col-2 col-lg-3">
                    
                        <input type="text" name="spur" class="pr" id="spur1">
                </div>
            </div>
            <div class="row centering">
                <div class="col-3"><strong>Spurious :</strong></div>
                <div class="col-7 col-lg-6 slidecontainer">
                    <input type="range" min="1" max="50" value="1" class="slider" id="spurious_copper"  placeholder="<%= prices[1] %>">
                </div>
                <div class="col-2 col-lg-3">
                    
                        <input type="text" name="spurious_copper" class="pr" id="spurious_copper1">
                </div>
            </div>
            <div class="row centering">
                <div class="col-3"><strong>Short :</strong></div>
                <div class="col-7 col-lg-6 slidecontainer">
                    <input type="range" min="1" max="50" value="1" class="slider" id="short"  placeholder="<%= prices[2] %>">
                </div>
                <div class="col-2 col-lg-3">
                    
                        <input type="text" name="short" class="pr" id="short1">
                </div>
            </div>
            <div class="row centering">
                <div class="col-3"><strong>Mousebite :</strong></div>
                <div class="col-7 col-lg-6 slidecontainer">
                    <input type="range" min="1" max="50" value="1" class="slider" id="mousebite"  placeholder="<%= prices[3] %>">
                </div>
                <div class="col-2 col-lg-3">
                    
                        <input type="text" name="mousebite" class="pr" id="mousebite1">
                </div>
            </div>
            <div class="row centering">
                <div class="col-3"><strong>Pinhole :</strong></div>
                <div class="col-7 col-lg-6 slidecontainer">
                    <input type="range" min="1" max="50" value="1" class="slider" id="pinhole"  placeholder="<%= prices[4] %>">
                </div>
                <div class="col-2 col-lg-3">
                        <input type="text" name="pinhole" class="pr" id="pinhole1">
                </div>
            </div>
            <div class="row centering">
                <div class="col-3"><strong>Open :</strong></div>
                <div class="col-7 col-lg-6 slidecontainer">
                    <input type="range" min="1" max="50" value="1" class="slider" id="open" placeholder="<%= prices[5] %>">
                </div>
                <div class="col-2 col-lg-3">
                    
                        <input type="text" name="open" class="pr" id="open1">
                </div>
            </div>
            <div class="row centering">
                <div class="recPrice">
                        <button class="btn btn-success">Record Price</button>
                </div>
            </div>
        </div>
    </form>
    <script type="text/javascript">
        const defects=['spur','spurious_copper','short','mousebite','pinhole','open'];
        var slider = document.getElementById(`spur`);
        var output = document.getElementById(`spur1`);
        output.value = '$ '+slider.value;
        slider.oninput = function() {
            output.value ='$ '+ this.value;
        }
        var slider1 = document.getElementById(`spurious_copper`);
        var output1 = document.getElementById(`spurious_copper1`);
        output1.value ='$ '+ slider1.value;
        slider1.oninput = function() {
            output1.value ='$ '+ this.value;
        }   
        var slider2 = document.getElementById(`short`);
        var output2 = document.getElementById(`short1`);
        output2.value ='$ '+ slider2.value;
        slider2.oninput = function() {
            output2.value ='$ '+ this.value;
        }   
        var slider3 = document.getElementById(`mousebite`);
        var output3 = document.getElementById(`mousebite1`);
        output3.value ='$ '+ slider3.value;
        slider3.oninput = function() {
            output3.value ='$ '+ this.value;
        }   
        var slider4 = document.getElementById(`pinhole`);
        var output4 = document.getElementById(`pinhole1`);
        output4.value ='$ '+ slider4.value;
        slider4.oninput = function() {
            output4.value ='$ '+ this.value;
        }   
        var slider5 = document.getElementById(`open`);
        var output5 = document.getElementById(`open1`);
        output5.value ='$ '+ slider5.value;
        slider5.oninput = function() {
            output5.value ='$ '+ this.value;
        }
        window.onload=()=>{
                for(let i=0;i<defects.length;i++)
                {
                    let checker;
                    let counter=1;
                    let slidery=document.getElementById(defects[i]);
                    let slidery1=document.getElementById(`${defects[i]}1`);
                    let till = parseInt(document.getElementById(defects[i]).placeholder);
                    checker=setInterval(sliders,10,slidery,slidery1,till);
                    function sliders(slid,slid1,till)
                    {
                        if(counter==till)
                        {
                            clearInterval(checker);
                        }
                        else
                        {
                            slid.setAttribute('value',parseInt(slid.getAttribute('value'))+1);
                            slid1.value='$ ' +slid.getAttribute('value');
                            counter+=1;
                            console.log('Mohan');
                        }
                    }   
                }   
        }
    </script>
</body>
</html>